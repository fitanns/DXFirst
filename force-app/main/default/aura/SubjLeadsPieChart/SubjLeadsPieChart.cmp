<!--
 - Created by DmytroPinchuk on 04.10.2019.
 -->

<aura:component description="SubjLeadsPieChart" implements="flexipage:availableForAllPageTypes"
                controller="SubjLeadsChartController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="subscription" type="Map"/>
    <aura:attribute name="spinner" type="Boolean" default="false"/>
    <ltng:require scripts="{!$Resource.ChartJs}"
                  afterScriptsLoaded="{!c.chartLoaded}"/>

    <aura:if isTrue="{!v.spinner}">
        <lightning:spinner size="medium" variant="brand" alternativeText="Loading"/>
    </aura:if>
    <lightning:empApi aura:id="empApi"/>
    <c:RequestCmp aura:id="requestCall" context="{!this}"/>
    <div class="pie-canvas">
        <lightning:card title="Leads of Subject">
            <canvas id="pie-chart"></canvas>
        </lightning:card>
    </div>
</aura:component>
